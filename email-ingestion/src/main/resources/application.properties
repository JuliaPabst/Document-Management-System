# Application Name
spring.application.name=email-ingestion
server.port=8082

# Database Configuration (shared with REST module)
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/organization}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:postgres}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:postgres}
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true

# RabbitMQ Configuration (shared queues with REST module)
spring.rabbitmq.host=${RABBITMQ_HOST:localhost}
spring.rabbitmq.port=${RABBITMQ_PORT:5672}
spring.rabbitmq.username=${RABBITMQ_USERNAME:guest}
spring.rabbitmq.password=${RABBITMQ_PASSWORD:guest}
rabbitmq.queue.ocr=ocr-worker-queue
rabbitmq.queue.genai=genai-worker-queue

# MinIO Configuration (shared bucket with REST module)
minio.endpoint=${MINIO_ENDPOINT:localhost}
minio.port=${MINIO_PORT:9000}
minio.access-key=${MINIO_ACCESS_KEY:admin}
minio.secret-key=${MINIO_SECRET_KEY:admin-password}
minio.bucket-name=${MINIO_BUCKET_NAME:documents}
minio.use-ssl=${MINIO_USE_SSL:false}

# Email Server Configuration
spring.mail.host=${EMAIL_HOST:imap.gmail.com}
spring.mail.port=${EMAIL_PORT:993}
spring.mail.username=${EMAIL_USERNAME}
spring.mail.password=${EMAIL_PASSWORD}
spring.mail.protocol=${EMAIL_PROTOCOL:imaps}
spring.mail.properties.mail.imaps.ssl.enable=true
spring.mail.properties.mail.imaps.ssl.trust=*
spring.mail.properties.mail.imaps.auth=true
spring.mail.properties.mail.imaps.connectiontimeout=10000
spring.mail.properties.mail.imaps.timeout=10000

# Email Polling Configuration
email.polling.enabled=${EMAIL_POLLING_ENABLED:true}
email.polling.interval=${EMAIL_POLLING_INTERVAL:30000}
email.polling.folder=${EMAIL_FOLDER:INBOX}
email.polling.mark-as-read=${EMAIL_MARK_AS_READ:true}
email.polling.delete-after-processing=${EMAIL_DELETE_AFTER_PROCESSING:false}

# File Validation Configuration
email.allowed-extensions=${EMAIL_ALLOWED_EXTENSIONS:pdf,doc,docx,txt,png,jpg,jpeg,gif,xls,xlsx,ppt,pptx,csv,zip}
email.max-file-size=${EMAIL_MAX_FILE_SIZE:52428800}

# Actuator Configuration (health checks for Docker)
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always
management.health.mail.enabled=false

# Logging Configuration
logging.level.root=INFO
logging.level.org.emailingestion=DEBUG
logging.level.org.springframework.integration=DEBUG
logging.level.org.springframework.integration.mail=DEBUG
logging.level.jakarta.mail=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
